# Python modules that are imported to find
# stage classes.  Any stages imported in these
# modules are automatically detected and their names can
# be used below
modules: test_mapbased_param

# The launcher to use
# These are defined in bbpipe/sites
launcher: local


# The list of stages to run and the number of processors
# to use for each.
stages:
    - name: BBMapSim 
      nprocess: 1
    - name: BBMapParamCompSep 
      nprocess: 1
    - name: BBClEstimation
      nprocess: 1
    - name: BBREstimation
      nprocess: 1

# Definitions of where to find inputs for the overall pipeline.
# Any input required by a pipeline stage that is not generated by
# a previous stage must be defined here.  They are listed by tag.
inputs:
    binary_mask: /global/cscratch1/sd/josquin/SO_sims/mask_04000.fits
    # frequency_maps: /global/cscratch1/sd/josquin/SO_sims/SO_sims_frequency_maps_nside512_sens1_knee1_nylf1.0_WN.fits
    # noise_cov: /global/cscratch1/sd/josquin/SO_sims/SO_sims_noise_cov_nside512_sens1_knee1_nylf1.0_WN.fits
    # noise_maps: /global/cscratch1/sd/josquin/SO_sims/SO_sims_noise_maps_nside512_sens1_knee1_nylf1.0_WN.fits
    Cl_BB_lens: /global/homes/j/josquin/SIMONS_OBS/BBPipe/test_mapbased_param/Cls_Planck2018_lensed_scalar.fits
    Cl_BB_prim_r1: /global/homes/j/josquin/SIMONS_OBS/BBPipe/test_mapbased_param/Cls_Planck2018_unlensed_scalar_and_tensor_r1.fits

# Overall configuration file 
config: ./test/config_mapbased_param.yml

# If all the outputs for a stage already exist then do not re-run that stage
resume: False

# Put all the output files in this directory:
output_dir: ./outputs

# Put the logs from the individual stages in this directory:
log_dir: ./logs

# Put the log for the overall pipeline infrastructure in this file:
pipeline_log: log.txt

